<%- include('templates/header') %>

<style>
    body {
        background-color: black;
        color: white; /* Ensure text is readable against the black background */
    }

    .purple-card {
        background-color: #6a0dad; /* Purple background */
        color: white; /* White text color */
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .btn-purple {
        background-color: #6a0dad; /* Purple background */
        color: white; /* White text color */
        padding: 10px 20px;
        border-radius: 5px;
        border: none;
        cursor: pointer;
        font-size: 16px;
    }

    .btn-purple:hover {
        background-color: #5a0cac; /* Darker purple on hover */
    }
</style>

<div class="container">
    <h1 class="text-center">Random Event Selector</h1>

    <div class="flex justify-center">
        <button id="spinButton" class="btn-purple">
            Show Selected Event
        </button>
    </div>

    <div id="gamecubeAnimation" class="hidden flex justify-center mt-5">
        <img src="/images/gamecube.gif" alt="Loading..." />
    </div>

    <div id="eventDetails" class="hidden mt-5 purple-card">
        <h2 class="text-center text-2xl">Selected Event</h2>
        <div>
            <p><strong>Title:</strong> <span id="eventTitle"></span></p>
            <p><strong>Description:</strong> <span id="eventDescription"></span></p>
            <p><strong>Location:</strong> <span id="eventLocation"></span></p>
            <p><strong>Info:</strong> <span id="eventInfo"></span></p>
            <p><strong>Category:</strong> <span id="eventCategory"></span></p>
        </div>
    </div>

    <!-- Hidden div to store JSON data -->
    <div id="eventData" data-events="<%= JSON.stringify(events).replace(/"/g, '&quot;') %>" class="hidden"></div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const spinButton = document.getElementById('spinButton');
        const gamecubeAnimation = document.getElementById('gamecubeAnimation');
        const eventDetails = document.getElementById('eventDetails');
        const eventTitle = document.getElementById('eventTitle');
        const eventDescription = document.getElementById('eventDescription');
        const eventLocation = document.getElementById('eventLocation');
        const eventInfo = document.getElementById('eventInfo');
        const eventCategory = document.getElementById('eventCategory');

        // Retrieve event data from the hidden div
        const eventDataElement = document.getElementById('eventData');
        const events = JSON.parse(eventDataElement.getAttribute('data-events').replace(/&quot;/g, '"'));

        // Handle button click to show selected event
        spinButton.addEventListener('click', () => {
            gamecubeAnimation.classList.remove('hidden');
            eventDetails.classList.add('hidden');

            setTimeout(() => {
                const randomIndex = Math.floor(Math.random() * events.length);
                const selectedEvent = events[randomIndex];
                eventTitle.textContent = selectedEvent.title;
                eventDescription.textContent = selectedEvent.description;
                eventLocation.textContent = selectedEvent.location;
                eventInfo.textContent = selectedEvent.info;
                eventCategory.textContent = selectedEvent.category;

                gamecubeAnimation.classList.add('hidden');
                eventDetails.classList.remove('hidden');
            }, 5000);  // 5-second delay
        });
    });
</script>

<%- include('templates/footer') %>
